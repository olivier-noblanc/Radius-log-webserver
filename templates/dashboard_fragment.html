<div id="view-dashboard">
    <!-- Dashboard Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="glass-panel p-4 text-center">
            <h4 class="text-sm font-bold opacity-75 mb-1">SUCCÃˆS</h4>
            <div class="text-3xl font-bold text-success">{{ success_rate_rounded }}%</div>
        </div>
        <div class="glass-panel p-4 text-center">
            <h4 class="text-sm font-bold opacity-75 mb-1">REJETS (TOTAL)</h4>
            <div class="text-3xl font-bold text-danger">{{ rejection_count }}</div>
        </div>
        <div class="glass-panel p-4 text-center">
            <h4 class="text-sm font-bold opacity-75 mb-1">UTILISATEURS ACTIFS</h4>
            <div class="text-3xl font-bold text-info">{{ active_users }}</div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- SSR Line Chart -->
        <div class="glass-panel p-6 shadow-glow">
            <h3 class="text-lg font-bold mb-4 flex items-center">
                <i class="bi bi-graph-up me-2 text-primary"></i>TENDANCE DES REJETS (24H)
            </h3>
            <div class="chart-container-ssr">
                <svg viewBox="0 0 400 100" class="w-full h-full" preserveAspectRatio="none">
                    <defs>
                        <linearGradient id="lineGradient" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="var(--accent-red)" stop-opacity="0.3" />
                            <stop offset="100%" stop-color="var(--accent-red)" stop-opacity="0" />
                        </linearGradient>
                    </defs>
                    <path d="M 0,100 {{ stats.svg_line_points }} 400,100 Z" fill="url(#lineGradient)" />
                    <polyline points="{{ stats.svg_line_points }}" fill="none" stroke="var(--accent-red)"
                        stroke-width="2" stroke-linejoin="round" />
                </svg>
                <div class="chart-labels-x flex justify-between text-xxs mt-2 opacity-50">
                    <span>00h</span><span>06h</span><span>12h</span><span>18h</span><span>23h</span>
                </div>
            </div>
        </div>

        <!-- SSR Pie Chart (CSS Gradient) -->
        <div class="glass-panel p-6 shadow-glow">
            <h3 class="text-lg font-bold mb-4 flex items-center">
                <i class="bi bi-pie-chart me-2 text-warning"></i>CAUSES DE REJET PRINCIPALES
            </h3>
            <div class="flex items-center gap-6">
                <div class="pie-chart-ssr" style="background: conic-gradient({{ stats.pie_gradient|safe }});">
                    <div class="pie-hole"></div>
                </div>
                <div class="pie-legend flex flex-col gap-2">
                    {% for item in stats.reasons_legend %}
                    <div class="flex items-center text-xs">
                        <span class="w-3 h-3 rounded-sm me-2" style="background: {{ item.1 }};"></span>
                        <span class="opacity-75 overflow-hidden text-ellipsis whitespace-nowrap"
                            style="max-width: 150px;">{{ item.0 }}</span>
                        <span class="ms-auto font-bold">{{ item.2 }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>